@model ITHelpDesk_Updated.Models.VendorViewModel

@{
    ViewData["Title"] = "Create Vendor";
}

<div class="container">
    <h2 style="margin-top: 0; text-align: center; color: #00008B; font-weight: bold">@ViewData["Title"]</h2>

    <!-- Vendor Form -->
    <form asp-action="@(Model.CurrentVendor.VendorCode == null || Model.CurrentVendor.VendorCode == ViewData["NextVendorCode"] ? "CreateVendor" : "EditVendor")" method="post" id="vendorForm">
        <div asp-validation-summary="All" class="text-danger"></div>
        <div class="form-group d-flex" style="margin-bottom: 10px; gap: 10px;">
            <!-- Vendor Code Field -->
            <div class="col-md-2">
                <label for="VendorCode" style="font-weight: bold;">Vendor Code</label>
                <input type="text" id="VendorCode" class="form-control" value="@Model.CurrentVendor.VendorCode" readonly />
                <input type="hidden" asp-for="CurrentVendor.VendorCode" />
            </div>

            <!-- Vendor Name Field -->
            <div class="col-md-2">
                <label for="CurrentVendor_VendorName" style="font-weight: bold;">Vendor Name</label>
                <input type="text" asp-for="CurrentVendor.VendorName" class="form-control" required />
                <span asp-validation-for="CurrentVendor.VendorName" class="text-danger"></span>
            </div>

            <!-- Vendor NTN Field -->
            <div class="col-md-2">
                <label for="CurrentVendor_VendorNTN" style="font-weight: bold;">Vendor NTN</label>
                <input type="text" asp-for="CurrentVendor.VendorNTN" class="form-control" required />
                <span asp-validation-for="CurrentVendor.VendorNTN" class="text-danger"></span>
            </div>

            <!-- Vendor CNIC Field -->
            <div class="col-md-2">
                <label for="CurrentVendor_VendorCNIC" style="font-weight: bold;">Vendor CNIC</label>
                <input type="text" asp-for="CurrentVendor.VendorCNIC" class="form-control" required />
                <span asp-validation-for="CurrentVendor.VendorCNIC" class="text-danger"></span>
            </div>

            <!-- Vendor Contact No Field -->
            <div class="col-md-2">
                <label for="CurrentVendor_VendorContactNo" style="font-weight: bold;">Vendor Contact No</label>
                <input type="text" asp-for="CurrentVendor.VendorContactNo" class="form-control" required />
                <span asp-validation-for="CurrentVendor.VendorContactNo" class="text-danger"></span>
            </div>

            <!-- Vendor Contact Person Field -->
            <div class="col-md-2">
                <label for="CurrentVendor_VendorContactPerson" style="font-weight: bold;">Vendor Contact Person</label>
                <input type="text" asp-for="CurrentVendor.VendorContactPerson" class="form-control" required />
                <span asp-validation-for="CurrentVendor.VendorContactPerson" class="text-danger"></span>
            </div>
        </div>

        <div class="form-group text-center mt-3">
            <button type="submit" class="btn btn-primary" style="padding: 10px 20px; font-size: 16px; background-color: orangered;">
                @(Model.CurrentVendor.VendorCode == null || Model.CurrentVendor.VendorCode == ViewData["NextVendorCode"] ? "Create Vendor" : "Update Vendor")
            </button>
        </div>
    </form>

    <hr />

    <!-- Submitted Vendors Table -->
    <h3 style="color: #00008B; font-weight: bold; text-align: center;">Submitted Vendors</h3>

    <div id="vendor-table" style="margin-top: 20px;">
        <table class="table table-bordered table-striped" style="width: 100%; text-align: center; border: 1px solid #000;">
            <thead class="bg-info text-white">
                <tr>
                    <th style="font-weight: bold; color: #00008B;">Vendor Code</th>
                    <th style="font-weight: bold; color: #00008B;">Vendor Name</th>
                    <th style="font-weight: bold; color: #00008B;">Vendor NTN</th>
                    <th style="font-weight: bold; color: #00008B;">Vendor CNIC</th>
                    <th style="font-weight: bold; color: #00008B;">Vendor Contact No</th>
                    <th style="font-weight: bold; color: #00008B;">Vendor Contact Person</th>
                    <th style="font-weight: bold; color: #00008B;">Actions</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.Vendors != null && Model.Vendors.Any())
                {
                    @foreach (var vendor in Model.Vendors)
                    {
                        <tr>
                            <td>@vendor.VendorCode</td>
                            <td>@vendor.VendorName</td>
                            <td>@vendor.VendorNTN</td>
                            <td>@vendor.VendorCNIC</td>
                            <td>@vendor.VendorContactNo</td>
                            <td>@vendor.VendorContactPerson</td>
                            <td>
                                <a asp-action="EditVendor" asp-route-vendorCode="@vendor.VendorCode" class="btn btn-primary btn-sm">Edit</a>
                            </td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="7" style="text-align: center; color: gray;">No vendors available.</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        // Enable client-side validation
        $(document).ready(function () {
            $("#vendorForm").validate({
                errorElement: 'span',
                errorClass: 'text-danger',
                highlight: function (element) {
                    $(element).addClass('is-invalid');
                },
                unhighlight: function (element) {
                    $(element).removeClass('is-invalid');
                }
            });
        });
    </script>
}

<style>
    .text-danger {
        font-size: 0.875em;
        margin-top: 0.25em;
    }

    .is-invalid {
        border-color: #dc3545;
    }

    .form-group {
        margin-bottom: 15px;
    }

    .form-control {
        width: 100%;
    }
</style>